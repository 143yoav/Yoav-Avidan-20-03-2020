(this["webpackJsonpherolo-weather"]=this["webpackJsonpherolo-weather"]||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){},11:function(e){e.exports=JSON.parse('{"apiKey":"rSdIDgLIu7b6yj7f9krAcCnzJ5BAWG7P","geopositionURL":"http://dataservice.accuweather.com/locations/v1/cities/geoposition/search","currentWeatherURL":"http://dataservice.accuweather.com/currentconditions/v1/","daysWeatherURL":"http://dataservice.accuweather.com/forecasts/v1/daily/5day/","autocompleteURL":"http://dataservice.accuweather.com/locations/v1/cities/autocomplete","defaultCityKey":"215791","defaultCityName":"Tel Aviv","weatherIconsPre":"https://developer.accuweather.com/sites/default/files/","weatherIconsSuf":"-s.png","minSearchLength":3}')},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),i=a.n(c),o=a(70),u=a(37),s=a(49),l=a(36),h=a(11),f={cityKey:h.defaultCityKey,cityName:h.defaultCityName,isMetric:!0,favorites:[]},p={weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT":return Object(l.a)({},e,{cityKey:t.city.key,cityName:t.city.name});case"UPDATE_FAVORITE":if(e.favorites.some((function(e){return e.key==t.fav.key}))){var a=e.favorites.filter((function(e){return e.key!=t.fav.key}));return localStorage.setItem("favorites",JSON.stringify(a)),Object(l.a)({},e,{favorites:a})}return localStorage.setItem("favorites",JSON.stringify([].concat(Object(s.a)(e.favorites),[t.fav]))),Object(l.a)({},e,{favorites:[].concat(Object(s.a)(e.favorites),[t.fav])});case"UPDATE_UNIT":return Object(l.a)({},e,{isMetric:t.isMetric});case"LOAD_FAVORITES":return Object(l.a)({},e,{favorites:t.favorites});default:return e}},theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_THEME":return t.theme;default:return e}}},m=Object(o.a)({reducer:p,middleware:[u.a]}),v=a(12);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=a(23),y=a(13),g=a(29),E=a.n(g),b=a(69),_=a(45),C=(a(87),function(e){return r.a.createElement(_.a,{to:e.to,className:"NaviLink","data-selected":e.isSelected,onClick:e.onClick(e.to)},e.value)}),k=a(142),O=(a(89),function(e){return r.a.createElement("div",{className:"Toggle__Wrapper"},r.a.createElement("label",null,e.uncheckedLabel),r.a.createElement(k.a,{checked:e.isChecked,onChange:function(t){e.onChange(t.target.checked)},classes:{checked:"Toggle-checked",track:"Toggle-track"}}),r.a.createElement("label",null,e.checkedLabel))}),w=a(14),N=a.n(w),T=a(28),j=a(63),x=a.n(j),W=function(){var e=Object(T.a)(N.a.mark((function e(t){var a,n,r=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.prev=1,a.apikey=h.apiKey,e.next=5,x.a.get(t,{params:a});case 5:return n=e.sent,e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),S=a(64),D=a.n(S),L=function(e){if(!e)return[];var t=[];return e.DailyForecasts.map((function(e){t.push({day:D()(e.Date).format("ddd"),unit:e.Temperature.Minimum.Unit,min:e.Temperature.Minimum.Value,max:e.Temperature.Maximum.Value,icon:e.Day.Icon<10?"0"+e.Day.Icon:e.Day.Icon})})),t},I=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e[0])return{};var a=t?"Metric":"Imperial";return{text:(e=e[0]).WeatherText,unit:e.Temperature[a].Unit,value:e.Temperature[a].Value,icon:e.WeatherIcon<10?"0"+e.WeatherIcon:e.WeatherIcon}},F=function(e){if(!e)return[];var t=[];return e.map((function(e){t.push({key:e.Key,city:e.LocalizedName,country:e.Country.LocalizedName,text:"".concat(e.LocalizedName,", ").concat(e.Country.LocalizedName)})})),t},M=a(26),U=function(){return new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}))},R=function(){var e=Object(T.a)(N.a.mark((function e(t){var a,n,r,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.coords,n=a.latitude,r=a.longitude,e.next=4,W(h.geopositionURL,{q:"".concat(n,",").concat(r)});case 4:return c=e.sent,e.abrupt("return",V(c.data.AdministrativeArea.EnglishName,c.data.Key));case 8:return e.prev=8,e.t0=e.catch(0),M.a.error("Error getting current location"),e.abrupt("return",A());case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){return M.a.error("Error getting current location"),V(h.defaultCityName,h.defaultCityKey)},K=function(){var e=Object(T.a)(N.a.mark((function e(t,a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W("".concat(h.currentWeatherURL).concat(t));case 3:return n=e.sent,e.abrupt("return",I(n.data,a));case 7:e.prev=7,e.t0=e.catch(0),M.a.error("Error getting current weather");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(T.a)(N.a.mark((function e(t,a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W("".concat(h.daysWeatherURL).concat(t),{metric:a});case 3:return n=e.sent,e.abrupt("return",L(n.data));case 7:e.prev=7,e.t0=e.catch(0),M.a.error("Error getting daily weather");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(T.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W("".concat(h.autocompleteURL),{q:t});case 3:return a=e.sent,e.abrupt("return",F(a.data));case 7:e.prev=7,e.t0=e.catch(0),M.a.error("Error getting search results");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),V=function(e,t){return{type:"SET_CURRENT",city:{name:e,key:t}}},J=(a(108),Object(v.b)((function(e){return{isMetric:e.weather.isMetric,isLight:"light"==e.theme}}),(function(e){return{updateUnit:function(t){return e(function(e){return{type:"UPDATE_UNIT",isMetric:e}}(t))},updateTheme:function(t){return e(function(e){return{type:"UPDATE_THEME",theme:e?"light":"dark"}}(t))}}}))((function(e){var t=Object(n.useState)("/"),a=Object(b.a)(t,2),c=a[0],i=a[1],o=function(e){return function(t){i(e)}};return r.a.createElement("div",{className:"Header__Wrapper"},r.a.createElement("span",{className:"Header__Title"},"Herolo Weather Task"),r.a.createElement("div",{className:"Header__Unit"},r.a.createElement(O,{checkedLabel:"\xb0C",uncheckedLabel:"\xb0F",isChecked:e.isMetric,onChange:function(t){return e.updateUnit(t)}})),r.a.createElement("div",{className:"Header__Theme"},r.a.createElement(O,{checkedLabel:"Light",uncheckedLabel:"Dark",isChecked:e.isLight,onChange:function(t){return e.updateTheme(t)}})),r.a.createElement("div",{className:"Header__Navigation"},r.a.createElement(C,{to:"/",value:"Home",isSelected:"/"==c,onClick:o}),r.a.createElement(C,{to:"/favorites",value:"Favorites",isSelected:"/favorites"==c,onClick:o})))}))),z=a(31),B=a(32),q=a(34),G=a(33),$=a(35),Q=a(68),X=(a(109),function(e){return r.a.createElement(Q.a,{placeholder:e.placeholder,isClearable:!0,isSearchable:!0,getOptionLabel:function(e){return e.text},className:"TextSelect__Input",classNamePrefix:"TextSelect",name:"text",options:e.options,onInputChange:function(t){return e.onChange(t)},onChange:function(t){return e.onSelect(t)}})}),Y=function(e){var t=e.index;return r.a.createElement("img",{src:"".concat(h.weatherIconsPre).concat(t).concat(h.weatherIconsSuf)})},Z=(a(110),function(e){var t=e.day,a=e.max,n=e.min,c=e.unit,i=e.icon;return r.a.createElement("div",{className:"DayWeather__Wrapper"},r.a.createElement("div",{className:"DayWeather__Day"},t),r.a.createElement(Y,{index:i,className:"DayWeather__Icon"}),r.a.createElement("div",{className:"DayWeather__Temps"},r.a.createElement("label",null,n," \xb0",c),r.a.createElement("label",null,"-"),r.a.createElement("label",null,a," \xb0",c)))}),ee=(a(111),function(e){var t=e.icon,a=e.city,n=e.value,c=e.unit;return r.a.createElement("div",{className:"CurrentWeatherValue__Wrapper"},t&&r.a.createElement(Y,{index:t}),r.a.createElement("label",null,a),r.a.createElement("label",null,n," \xb0",c))}),te=a(71),ae=(a(112),Object(v.b)((function(e){return{city:e.weather.cityName,index:e.weather.cityKey,favorites:e.weather.favorites}}),(function(e){return{updateFavorite:function(t,a){return e(function(e,t){return{type:"UPDATE_FAVORITE",fav:{city:e,key:t}}}(t,a))}}}))((function(e){var t=e.city,a=e.index,n=e.favorites,c=e.text,i=n.some((function(e){return e.key==a}));return r.a.createElement("div",{className:"CurrentWeather__Wrapper"},r.a.createElement(ee,Object.assign({},e,{className:"CurrentWeather__Value"})),r.a.createElement("div",{className:"CurrentWeather__Favorite"},r.a.createElement(te.a,{isClick:i,onClick:function(){return e.updateFavorite(t,a)}})),r.a.createElement("div",{className:"CurrentWeather__Text"},c))}))),ne=a(141),re=(a(113),function(e){return function(t){function a(){return Object(z.a)(this,a),Object(q.a)(this,Object(G.a)(a).apply(this,arguments))}return Object($.a)(a,t),Object(B.a)(a,[{key:"render",value:function(){return this.props.isFetching?r.a.createElement(ne.a,{classes:{colorPrimary:"withLoading__Spinner"}}):r.a.createElement(e,this.props)}}]),a}(r.a.Component)}),ce=(a(114),re((function(e){var t=e.days,a=e.current;return r.a.createElement("div",{className:"WeatherContainer__Wrapper"},r.a.createElement("div",{className:"WeatherContainer__Current"},r.a.createElement(ae,a)),r.a.createElement("div",{className:"WeatherContainer__Days"},t&&t.map((function(e){return r.a.createElement(Z,e)}))))}))),ie=(a(115),function(e){function t(){var e,a;Object(z.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(q.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(r)))).state={searchResults:[],days:[],current:[],isFetching:!1},a.fetchData=function(e){a.setState({isFetching:!0}),Promise.all([K(e,a.props.isMetric),P(e,a.props.isMetric)]).then((function(e){e[0]&&e[1]&&a.setState({current:e[0],days:e[1],isFetching:!1})}))},a.onTextChanged=function(e){e.length>=h.minSearchLength?H(e).then((function(e){return a.setState({searchResults:e})})):a.setState({searchResults:[]})},a.onCitySelect=function(e){var t=e.city,n=e.key;a.props.setCurrentCity(t,n),a.fetchData(n)},a}return Object($.a)(t,e),Object(B.a)(t,[{key:"componentDidUpdate",value:function(e){e.cityKey==this.props.cityKey&&e.isMetric==this.props.isMetric||this.fetchData(this.props.cityKey)}},{key:"componentDidMount",value:function(){this.fetchData(this.props.cityKey)}},{key:"render",value:function(){return r.a.createElement("div",{className:"HomePage__Wrapper"},r.a.createElement(X,{placeholder:"city",options:this.state.searchResults,onChange:this.onTextChanged,onSelect:this.onCitySelect}),r.a.createElement(ce,{isFetch:!0,days:this.state.days,current:this.state.current,isFetching:this.state.isFetching}))}}]),t}(n.Component)),oe=Object(v.b)((function(e){return{cityKey:e.weather.cityKey,isMetric:e.weather.isMetric}}),(function(e){return{setCurrentCity:function(t,a){return e(V(t,a))}}}))(ie),ue=(a(116),re((function(e){var t=e.cityName,a=e.value,n=e.unit,c=e.icon,i=e.text;return r.a.createElement("div",{className:"FavoriteWeatherData__Wrapper"},r.a.createElement("label",null,t),r.a.createElement("label",null,a," \xb0",n),r.a.createElement(Y,{index:c}),r.a.createElement("label",null,i))}))),se=(a(117),function(e){function t(){var e,a;Object(z.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(q.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(r)))).state={isFetching:!1,data:{}},a.fetchData=function(){a.setState({isFetching:!0}),K(a.props.cityKey,a.props.isMetric).then((function(e){e&&a.setState({isFetching:!1,data:e})}))},a.onClick=function(e){var t=a.props,n=t.cityKey,r=t.city;a.props.setCurrentCity(r,n),a.props.history.push("/")},a}return Object($.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){e.isMetric!=this.props.isMetric&&this.fetchData()}},{key:"render",value:function(){var e=this.state.data,t=e.value,a=e.unit,n=e.icon,c=e.text;return r.a.createElement("div",{className:"FavoriteWeather__Wrapper",onClick:this.onClick},r.a.createElement(ue,{isFetching:this.state.isFetching,cityName:this.props.city,value:t,unit:a,icon:n,text:c}))}}]),t}(n.Component)),le=Object(v.b)((function(e){return{isMetric:e.weather.isMetric}}),(function(e){return{setCurrentCity:function(t,a){return e(V(t,a))}}}))(Object(d.f)(se)),he=(a(118),Object(v.b)((function(e){return{favorites:e.weather.favorites}}))((function(e){var t=e.favorites;return r.a.createElement("div",{className:"FavoritesPage__Wrapper"},t&&t.map((function(e){return r.a.createElement(le,{cityKey:e.key,city:e.city})})))}))),fe=(a(119),a(120),Object(y.a)()),pe=Object(v.b)((function(e){return{theme:e.theme}}),(function(e){return{getCurrentLocation:function(){return e((function(e){U().then(function(){var t=Object(T.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,R(a);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e(A())}))}))},loadFavorites:function(){return e({type:"LOAD_FAVORITES",favorites:localStorage.getItem("favorites")?JSON.parse(localStorage.getItem("favorites")):[]})}}}))((function(e){return Object(n.useEffect)((function(){e.getCurrentLocation(),e.loadFavorites(),M.a.configure({position:M.a.POSITION.BOTTOM_RIGHT})}),[]),r.a.createElement(d.b,{history:fe},r.a.createElement("div",{className:E()("AppRouter__Wrapper","theme-".concat(e.theme))},r.a.createElement(J,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",component:oe,exact:!0}),r.a.createElement(d.a,{path:"/favorites",component:he,exact:!0}))))}));a(121);i.a.render(r.a.createElement(v.a,{store:m},r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},73:function(e,t,a){e.exports=a(122)},87:function(e,t,a){},89:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.19a8ff11.chunk.js.map